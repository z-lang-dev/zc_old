## Z语言编译器

zc是用C语言实现的Z语言编译器。 

zc工程使用C语言开发，暂时只支持Linux平台。

zc工程初始的代码是从[ChibiCC](https://github.com/rui314/chibicc)fork过来的，并根据Z语言的特性进行修改。

将来，zc会参考LCC、TCC等其他开源C编译器的实现，添加更多的特性。

## 语言特性

Z语言规划为两个版本：

- zc：语言特性基本和C持平，稍作扩展。zc编译器用C语言实现。zc完成的标志是实现自举：用Z语言实现一个zc的编译器，即zz编译器。
- zz：改用zz编译器之后，在这个基础上逐步添加更高阶的语言特性，如：元编程、泛型、多态、异步、动态语言支持等。

zc的语言特性规划如下：

1. 和C语言实现ABI级别的互操作。
2. 实现和C语言的互相翻译功能。翻译保留可读性。
3. 语法稍作改变，参考Go/Kotlin/D等语言。
4. 摒弃预处理，实现基础的块化。
5. 自定义类型与方法。注意，Z语言不支持继承，而是打算采取组合的方式来实现多态复用。

总体而言，zc可以看作添加了基本类型支持的C语言。相当于C with classes。

zz的语言特性规划如下：

1. 面向场景编程。根据不同的实用场景，编译器提供不同的语言特性组合。例如，在脚本场景下，支持动态类型。
2. 动态编程。添加新的语法，支持动态解释、动态类型、自动垃圾回收，和Javascript语言的互操作，添加JS后端，接入JS生态。
3. 编译期执行。把动态解释器集成到编译流程之中，实现编译器的代码执行。这个特性也可以用来实现元编程、宏等功能。
4. 编译服务。将编译的各个阶段打散，实现分布式地可持续的编译服务。实现增量话编译、自动优化、热更新。
5. 添加更多的后端，如LLVM，WebAssembly等。

## 开发计划

- 0.1：参考ChibiCC，实现C的基本特性。
- 0.2：学习LCC，根据需求修改或添加特性。
- 0.3：学习TCC，根据需求修改或添加特性。
- 0.4：实现和C语言的互相翻译。
- 0.5：添加类型系统，实现自定义类型与方法。
- 0.6：添加基础的模块化。
...
- 1.0：实现自举：用Z语言实现zz编译器。

1.0之后的规划等实现了zz编译器，再在zz编译器工程里讨论。

## 感谢

- [ChibiCC](https://github.com/rui314/chibicc) - 本工程的灵感来源，也是本工程的代码基础。参看[引用License](#引用License)。
- [LCC](https://github.com/drh/lcc) - 一个开源的C编译器，并配套了的书籍《A Retargetable C Compiler: Design and Implementation》。我会学习这本书，并参考它的实现。
- [TCC](https://www.bellard.org/tcc) - 大神Bellard开发的C编译器。本来我打算用它作为实现基础，但可惜没找到相对完整的文档。我打算学习完chibicc和LCC之后，再自己阅读TCC的源码，并融入它的部分特性。
- [QuickJS](https://bellard.org/quickjs/) - 一个开源的Javascript引擎。我会学习它的实现，用来实现Z语言动态子系统以及与Javascript的互操作。


### 引用License

[ChibiCC](https://github.com/rui314/chibicc)：[MIT License](LICENSE.chibicc)